================================================================================
TEST COVERAGE ANALYSIS - AI TEDDY BACKEND
================================================================================

Total source files: 420
Files missing tests: 361
Estimated coverage: 14.0%

================================================================================
FILES MISSING TEST COVERAGE (grouped by directory)
================================================================================

📁 domain/services/ (HIGH PRIORITY)
   ❌ age_filter.py
   ❌ coppa_age_validation.py
   ❌ data_retention_service.py
   ❌ parental_consent_enforcer.py
   ❌ safety_validator.py

📁 domain/entities/ (HIGH PRIORITY)
   ❌ audio_session.py
   ❌ encrypted_child.py

📁 domain/entities/parent_profile/ (HIGH PRIORITY)
   ❌ entities.py

📁 domain/entities/voice_games/ (HIGH PRIORITY)
   ❌ voice_games_engine.py

📁 application/services/ (HIGH PRIORITY)
   ❌ accessibility_service.py
   ❌ advanced_personalization_service.py
   ❌ advanced_progress_analyzer.py
   ❌ async_session_manager.py
   ❌ audio_processing_service.py
   ❌ audio_service.py
   ❌ audit_service.py
   ❌ cleanup_service.py
   ❌ consent_service.py
   ❌ content_filter_service.py
   ❌ data_export_service.py
   ❌ data_retention_service.py
   ❌ dynamic_content_service.py
   ❌ dynamic_story_service.py
   ❌ esp32_device_service.py
   ❌ feature_service.py
   ❌ federated_learning_service.py
   ❌ incident_service.py
   ❌ interaction_service.py
   ❌ notification_service.py
   ❌ parent_child_verification_service.py
   ❌ response_generator.py
   ❌ transcription_models.py
   ❌ transcription_service.py
   ❌ voice_service.py

📁 application/services/ai/ (HIGH PRIORITY)
   ❌ main_service.py
   ❌ models.py
   ❌ utils.py

📁 application/services/ai/modules/ (HIGH PRIORITY)
   ❌ response_generator.py
   ❌ transcription_service.py

📁 application/services/consent/ (HIGH PRIORITY)
   ❌ consent_models.py
   ❌ consent_service.py
   ❌ verification_service.py

📁 application/services/data_export/ (HIGH PRIORITY)
   ❌ formatters.py
   ❌ types.py

📁 application/services/session/ (HIGH PRIORITY)
   ❌ session_models.py
   ❌ session_storage.py

📁 application/services/verification/ (HIGH PRIORITY)
   ❌ relationship_manager.py
   ❌ verification_models.py
   ❌ verification_service.py

📁 infrastructure/security/ (HIGH PRIORITY)
   ❌ access_control_service.py
   ❌ api_security_manager.py
   ❌ audit_decorators.py
   ❌ audit_logger.py
   ❌ child_data_encryption.py
   ❌ child_data_security_manager.py
   ❌ comprehensive_audit_integration.py
   ❌ comprehensive_input_validation_middleware.py
   ❌ comprehensive_rate_limiter.py
   ❌ coppa_compliance_service.py
   ❌ coppa_validator.py
   ❌ cors_service.py
   ❌ database_input_validator.py
   ❌ email_validator.py
   ❌ enhanced_security.py
   ❌ environment_validator.py
   ❌ error_handler.py
   ❌ fallback_rate_limiter.py
   ❌ file_security_manager.py
   ❌ https_middleware.py
   ❌ jwt_auth.py
   ❌ key_rotation.py
   ❌ key_rotation_service.py
   ❌ log_sanitization_config.py
   ❌ log_sanitizer.py
   ❌ logging_security_monitor.py
   ❌ main_security_service.py
   ❌ models.py
   ❌ password_hasher.py
   ❌ password_validator.py
   ❌ path_validator.py
   ❌ plugin_architecture.py
   ❌ production_encryption_service.py
   ❌ rate_limiter.py
   ❌ rate_limiter_service.py
   ❌ real_auth_service.py
   ❌ registration_models.py
   ❌ request_security_detector.py
   ❌ request_signing_service.py
   ❌ robust_encryption_service.py
   ❌ safety_monitor_service.py
   ❌ secret_manager.py
   ❌ secure_error_handler.py
   ❌ secure_logger.py
   ❌ secure_logging.py
   ❌ secure_user_registration.py
   ❌ security_headers_middleware.py
   ❌ security_headers_service.py
   ❌ security_manager.py
   ❌ security_middleware.py
   ❌ sql_injection_protection.py
   ❌ token_service.py
   ❌ vault_client.py

📁 infrastructure/security/coppa/ (HIGH PRIORITY)
   ❌ consent_manager.py
   ❌ data_models.py
   ❌ data_retention.py

📁 infrastructure/security/hardening/ (HIGH PRIORITY)
   ❌ csrf_protection.py
   ❌ rate_limiter.py
   ❌ secure_settings.py
   ❌ security_headers.py
   ❌ security_tests.py

📁 infrastructure/security/hardening/security_tests/ (HIGH PRIORITY)
   ❌ authentication_tests.py
   ❌ base_tester.py
   ❌ compliance_tests.py
   ❌ encryption_tests.py
   ❌ injection_tests.py
   ❌ security_tester.py

📁 infrastructure/security/hardening/validation/ (HIGH PRIORITY)
   ❌ middleware.py
   ❌ sanitizer.py
   ❌ validation_config.py
   ❌ validation_rules.py

📁 infrastructure/security/input_validation/ (HIGH PRIORITY)
   ❌ core.py
   ❌ detectors.py
   ❌ middleware.py
   ❌ patterns.py

📁 infrastructure/security/key_management/ (HIGH PRIORITY)
   ❌ key_generator.py
   ❌ key_lifecycle_manager.py
   ❌ key_rotation_orchestrator.py
   ❌ rotation_executor.py
   ❌ rotation_policy_manager.py
   ❌ rotation_statistics.py

📁 infrastructure/security/rate_limiter/ (HIGH PRIORITY)
   ❌ convenience.py
   ❌ core.py
   ❌ storage.py
   ❌ strategies.py

📁 infrastructure/security/secrets_manager/ (HIGH PRIORITY)
   ❌ secrets_manager.py

📁 infrastructure/security/tests/ (HIGH PRIORITY)
   ❌ test_path_traversal_fixes.py

📁 infrastructure/security/validation/ (HIGH PRIORITY)
   ❌ input_sanitizer.py
   ❌ query_validator.py

📁 infrastructure/persistence/ (HIGH PRIORITY)
   ❌ conversation_repository.py
   ❌ conversation_sqlite_repository.py
   ❌ database_service_orchestrator.py
   ❌ event_store.py
   ❌ kafka_event_store.py
   ❌ model_registry.py
   ❌ models.py
   ❌ postgres_event_store.py
   ❌ production_database_config.py
   ❌ real_database_service.py
   ❌ repositories.py

📁 infrastructure/persistence/database/ (HIGH PRIORITY)
   ❌ initializer.py
   ❌ validators.py

📁 infrastructure/persistence/models/ (HIGH PRIORITY)
   ❌ child_model.py
   ❌ child_models.py
   ❌ consent_models.py
   ❌ conversation_model.py
   ❌ conversation_models.py
   ❌ parent_models.py
   ❌ user_model.py

📁 infrastructure/persistence/repositories/ (HIGH PRIORITY)
   ❌ conversation_repository.py
   ❌ safety_repository.py
   ❌ usage_repository.py
   ❌ user_repository.py

📁 application/dto/
   ❌ child_data.py
   ❌ esp32_request.py
   ❌ story_request.py
   ❌ story_response.py

📁 application/dto/esp32/
   ❌ esp32_data.py

📁 application/event_handlers/
   ❌ child_profile_event_handlers.py

📁 application/interfaces/
   ❌ ai_provider.py
   ❌ infrastructure_services.py
   ❌ read_model_interfaces.py
   ❌ safety_monitor.py
   ❌ speech_processor.py
   ❌ text_to_speech_service.py
   ❌ tts_provider.py

📁 application/interfaces/security/
   ❌ encryption_interfaces.py

📁 common/
   ❌ constants.py

📁 domain/
   ❌ constants.py
   ❌ contracts.py
   ❌ schemas.py

📁 domain/esp32/
   ❌ models.py

📁 domain/events/
   ❌ child_profile_updated.py
   ❌ child_registered.py
   ❌ conversation_started.py
   ❌ conversation_updated.py

📁 domain/exceptions/
   ❌ base_exceptions.py

📁 domain/interfaces/
   ❌ ai_service_interface.py
   ❌ config_interface.py
   ❌ encryption_interface.py
   ❌ event_bus_interface.py
   ❌ external_service_interfaces.py
   ❌ logging_interface.py
   ❌ repository_interfaces.py
   ❌ security_interfaces.py

📁 domain/models/
   ❌ consent_models.py
   ❌ data_retention_models.py

📁 domain/repositories/
   ❌ conversation_repository.py
   ❌ event_store.py

📁 domain/safety/
   ❌ models.py

📁 domain/safety/bias_detector/
   ❌ bias_detector.py

📁 domain/safety/bias_models/
   ❌ bias_models.py

📁 domain/value_objects/
   ❌ age_group.py
   ❌ child_age.py
   ❌ child_preferences.py
   ❌ encrypted_field.py
   ❌ language.py
   ❌ safety_level.py

📁 infrastructure/
   ❌ dependencies.py
   ❌ exceptions.py
   ❌ lifespan.py
   ❌ logging_config.py
   ❌ middleware.py

📁 infrastructure/adapters/
   ❌ encryption_adapter.py

📁 infrastructure/ai/
   ❌ models.py
   ❌ production_ai_service.py
   ❌ prompt_builder.py
   ❌ real_ai_service.py
   ❌ safety_analyzer.py

📁 infrastructure/ai/chatgpt/
   ❌ client.py
   ❌ fallback_responses.py
   ❌ response_enhancer.py
   ❌ safety_filter.py

📁 infrastructure/cache/
   ❌ redis_cache.py

📁 infrastructure/caching/
   ❌ cache_config.py
   ❌ redis_cache_manager.py

📁 infrastructure/caching/strategies/
   ❌ invalidation_strategy.py

📁 infrastructure/chaos/actions/
   ❌ ai_model_recovery_testing.py
   ❌ bias_detection_testing.py
   ❌ hallucination_testing.py
   ❌ load_testing.py
   ❌ response_consistency_testing.py

📁 infrastructure/chaos/infrastructure/
   ❌ chaos_injector.py
   ❌ chaos_monitor.py
   ❌ chaos_orchestrator.py
   ❌ chaos_reporter.py

📁 infrastructure/chaos/monitoring/
   ❌ chaos_metrics.py

📁 infrastructure/chaos/monitoring/chaos_metrics/
   ❌ data_models.py
   ❌ metrics_collector.py

📁 infrastructure/config/
   ❌ ai_settings.py
   ❌ base_settings.py
   ❌ env_security.py
   ❌ infrastructure_settings.py
   ❌ models.py
   ❌ production_check.py
   ❌ production_settings.py
   ❌ secure_settings.py
   ❌ security_settings.py
   ❌ settings.py
   ❌ startup_validator.py
   ❌ validators.py

📁 infrastructure/container/
   ❌ app_container.py

📁 infrastructure/di/
   ❌ fastapi_dependencies.py

📁 infrastructure/di/di_components/
   ❌ service_factory.py
   ❌ wiring_config.py

📁 infrastructure/error_handling/
   ❌ decorators.py
   ❌ error_handlers.py
   ❌ exceptions.py
   ❌ handlers.py
   ❌ messages.py

📁 infrastructure/exception_handling/
   ❌ circuit_breaker.py
   ❌ enterprise_exception_handler.py
   ❌ global_exception_handler.py

📁 infrastructure/external_apis/
   ❌ azure_speech_client.py
   ❌ chatgpt_client.py
   ❌ chatgpt_service.py
   ❌ elevenlabs_client.py
   ❌ openai_client.py
   ❌ whisper_client.py

📁 infrastructure/external_services/
   ❌ speech_analysis_base.py
   ❌ speech_disorder_analyzer.py
   ❌ speech_disorder_detector.py

📁 infrastructure/health/
   ❌ checks.py
   ❌ health_manager.py
   ❌ models.py

📁 infrastructure/health/checks/
   ❌ database_check.py
   ❌ redis_check.py
   ❌ system_check.py

📁 infrastructure/logging/
   ❌ audit_logger.py
   ❌ standards.py

📁 infrastructure/messaging/
   ❌ audio_streamer.py
   ❌ esp32_handler.py
   ❌ event_driven_architecture.py
   ❌ kafka_event_bus.py

📁 infrastructure/middleware/
   ❌ rate_limit_middleware.py
   ❌ request_signing.py
   ❌ secure_cors.py

📁 infrastructure/monitoring/
   ❌ comprehensive_monitoring.py
   ❌ comprehensive_monitoring_refactored.py

📁 infrastructure/monitoring/components/
   ❌ child_safety_monitor.py
   ❌ monitoring_service.py
   ❌ types.py

📁 infrastructure/pagination/
   ❌ pagination_service.py

📁 infrastructure/performance/
   ❌ batch_loader.py
   ❌ caching_decorators.py
   ❌ memoization.py

📁 infrastructure/read_models/
   ❌ child_profile_read_model.py

📁 infrastructure/repositories/
   ❌ event_sourced_child_repository.py

📁 infrastructure/resilience/
   ❌ circuit_breaker.py
   ❌ retry_decorator.py

📁 infrastructure/services/
   ❌ data_retention_service.py

📁 infrastructure/session_manager/
   ❌ session_models.py

📁 infrastructure/state/
   ❌ application_state_manager.py

📁 infrastructure/validation/
   ❌ child_safety_validator.py
   ❌ comprehensive_input_validator.py
   ❌ comprehensive_validator.py
   ❌ emergency_contact_validator.py
   ❌ general_input_validator.py
   ❌ types.py
   ❌ validation_types.py

📁 presentation/
   ❌ routing.py

📁 presentation/api/
   ❌ error_handlers.py
   ❌ health_endpoints.py
   ❌ main_router.py
   ❌ openapi_config.py
   ❌ openapi_docs.py
   ❌ validators.py

📁 presentation/api/emergency_response/
   ❌ models.py
   ❌ services.py

📁 presentation/api/endpoints/
   ❌ chatgpt.py
   ❌ children_legacy.py
   ❌ conversations_paginated.py
   ❌ coppa_notices.py
   ❌ device.py
   ❌ example_simplified.py
   ❌ monitoring_dashboard.py

📁 presentation/api/endpoints/auth/
   ❌ routes_di.py

📁 presentation/api/endpoints/children/
   ❌ create_child.py
   ❌ get_children.py
   ❌ models.py
   ❌ route_handlers.py
   ❌ routes.py
   ❌ routes_di.py
   ❌ routes_refactored.py

📁 presentation/api/middleware/
   ❌ child_safe_rate_limiter.py
   ❌ comprehensive_security_headers.py
   ❌ exception_handler.py
   ❌ rate_limit_middleware.py
   ❌ request_logging.py
   ❌ security_headers.py
   ❌ security_headers_refactored.py
   ❌ security_headers_refactored_clean.py

📁 presentation/api/middleware/security/
   ❌ child_safety_middleware.py
   ❌ headers_config.py
   ❌ rate_limiting_middleware.py
   ❌ security_headers_middleware.py

📁 presentation/api/middleware/security_headers/
   ❌ csp_policies.py
   ❌ header_builder.py
   ❌ header_config.py
   ❌ middleware.py

📁 presentation/api/models/
   ❌ standard_responses.py
   ❌ validation_models.py

📁 presentation/middleware/
   ❌ cors_middleware.py
   ❌ error_handler.py
   ❌ logging_middleware.py

📁 presentation/schemas/
   ❌ esp32_schemas.py
   ❌ parent_schemas.py

📁 utils/
   ❌ comment_formatter.py
   ❌ file_validators.py
   ❌ find_long_functions.py
   ❌ import_organizer.py
   ❌ type_annotation_fixer.py

================================================================================
TOP 20 CRITICAL FILES NEEDING TESTS
================================================================================
 1. utils/file_validators.py
 2. application/event_handlers/child_profile_event_handlers.py
 3. application/interfaces/infrastructure_services.py
 4. application/interfaces/speech_processor.py
 5. application/interfaces/text_to_speech_service.py
 6. application/services/accessibility_service.py
 7. application/services/advanced_personalization_service.py
 8. application/services/async_session_manager.py
 9. application/services/audio_processing_service.py
10. application/services/audio_service.py
11. application/services/audit_service.py
12. application/services/cleanup_service.py
13. application/services/consent_service.py
14. application/services/content_filter_service.py
15. application/services/data_export_service.py
16. application/services/data_retention_service.py
17. application/services/dynamic_content_service.py
18. application/services/dynamic_story_service.py
19. application/services/esp32_device_service.py
20. application/services/feature_service.py